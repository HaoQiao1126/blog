>  https://www.cnblogs.com/chenpt/p/9777367.html 

## 1、概述

​		虚拟机加载 Class 文件（二进制字节流）到内存，并对数据进行校验、转换解析和初始化，最终形成可被虚拟机直接使用的 Java 类型，这一系列过程就是类的加载机制。

## 2、类的加载时机

​		类从被虚拟机加载到内存开始，直到卸载出内存为止，整个生命周期包括：加载--验证--准备--解析--初始化--使用--卸载；这 7 个阶段。其中验证、准备、解析 3 个部分统称为连接。

​	生命周期图如下：

![ClassLoadProcess](assets/ClassLoadProcess.png)

其中加载、验证、准备、初始化、卸载 这 5 个阶段顺序是确定的，类的加载过程必须按照这种顺序进行开始，而解析阶段则不一定：它在某种情况下可以在初始化之后再开始，这也是为了支持 Java 语言的动态绑定。

- 哪些情况能触发类的初始化阶段？（前提：加载、验证、准备自然是已经执行完了）

  1、 遇到new、getstatic、putstatic、invokestatic 这4条指令时如果类没有初始化则会触发其初始化，（工作		中触发这4种指令最常见的场景：new实例化对象、读取or设置类的静态字段【final修饰或者已经把静态		字段放入常量池的除外】、调用类的静态方法） 

  2、 使用反射的时候 

  3、 初始化类的时候如果其父类还没进行初始化，则需要先触发父类的初始化 

  4、 虚拟机启动时，需要指定一个要执行的主类（包含main方法的那个类），虚拟机会先初始化这个类 

  5、 使用jdk1.7动态语言支持时，如果一个java.lang.invoke.MethodHandle实例最后的解析结果是				      REF_getStatic、REF_putStatic、REF_invokeStatic的方法句柄。切这个句柄对应的类没有初始化，则需要先触发其初始化 

注意：所有引用类的方式都不会触发初始化（被动引用）例如：创建数组、引用final修饰的变量、子类引用父类的静态变量 不会触发子类初始化但是会触发父类初始化 

